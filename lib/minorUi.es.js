import{defineComponent as e,openBlock as t,createElementBlock as l,renderSlot as i,createCommentVNode as s,createElementVNode as n,ref as a,onMounted as o,nextTick as r,computed as u,normalizeStyle as c,Fragment as m,renderList as v,toDisplayString as d,reactive as h,onUnmounted as p,withModifiers as f}from"vue";var g=e({name:"MiCard"});const _={class:"mi-card"},x={key:0,class:"mi-card__header"},y={class:"mi-card__content"};g.render=function(e,a,o,r,u,c){return t(),l("div",_,[e.$slots.header?(t(),l("div",x,[i(e.$slots,"header")])):s("v-if",!0),n("div",y,[i(e.$slots,"default")])])},g.__file="packages/Card/card.vue",g.install=e=>{e.component(g.name||"MiCard",g)};const b=g;var w=e({name:"MiImageList",props:{imgList:Array,showLabel:Boolean,width:{type:Number,default:120}},setup(e,{slots:t}){let l=a(0);const i=a(null);let s=a(0);o((()=>{r((()=>{const t=i.value;let l=(null==t?void 0:t.offsetWidth)||0;s.value=Math.floor(l/e.width)}))}));const n=u((()=>{let t=e.width+10;return-l.value*t}));return{imagesBoxRef:i,width:e.width,next:()=>{var t;let i=((null==(t=e.imgList)?void 0:t.length)||0)-s.value;l.value<i&&l.value++},prev:()=>{l.value>0&&l.value--},marginLeft:n}}});const L={class:"mi-images",ref:"imagesBoxRef"},M={class:"mi-images__src"},k=["src"],H={key:0,class:"mi-images__txt"};w.render=function(e,a,o,r,u,h){return t(),l("div",L,[n("div",{class:"mi-images__btn mi-images__prev",onClick:a[0]||(a[0]=(...t)=>e.prev&&e.prev(...t))},"<"),n("div",{class:"mi-images__content",style:c({"margin-left":e.marginLeft+"px"})},[(t(!0),l(m,null,v(e.imgList,(a=>(t(),l("div",{class:"mi-images__item",key:"mi_image_list_"+a,style:c({width:e.width+"px"})},[n("div",M,[n("img",{src:a.src||a,alt:"img"},null,8,k)]),e.showLabel?(t(),l("div",H,[i(e.$slots,"label",{},(()=>[n("p",null,d(a.label),1)]))])):s("v-if",!0)],4)))),128))],4),n("div",{class:"mi-images__btn mi-images__next",onClick:a[1]||(a[1]=(...t)=>e.next&&e.next(...t))},">")],512)},w.__file="packages/ImageList/Index.vue",w.install=e=>{e.component(w.name||"MiImageList",w)};const T=w;var R=e({name:"MiVirtualScroll",props:{list:{type:Array,default:()=>[]},height:[Number,String],itemHeight:Number,rows:{type:Number,default:20}},setup(e,{slots:t}){const l=a(null);let i=a(null);const s=h({start:0,end:0,initHeight:0,scrollTop:0,listHeight:0}),n=e.rows||1;let c=e.itemHeight||0;o((()=>{r((()=>{e.list.length>0&&r((()=>{const t=l.value,n=i.value;s.initHeight=l.value.getBoundingClientRect().top+(null==n?void 0:n.scrollTop),c=t.children&&t.children.length?t.children[0].offsetHeight:0,s.listHeight=c*e.list.length}));const t=i.value;null==t||t.addEventListener("scroll",f)}))}));const m=u((()=>e.height&&e.height.toString().includes("%")?e.height:e.height+"px")),v=u((()=>{const t=e.list;let l=s.start+n;return l>=t.length&&(l=t.length),t.slice(s.start,l).map(((e,t)=>{const l=s.start+t+1;return"string"==typeof e||"number"==typeof e?e={val:e,idx:l}:e.idx=l,e}))}));function d(){const e=i.value,t=(null==e?void 0:e.scrollTop)||0;if(t>s.initHeight){const e=Math.floor((t-s.initHeight)/c);s.scrollTop=e*c,s.start=e}else s.scrollTop=0,s.start=0}function f(){((e,t)=>{let l;return(...i)=>{clearTimeout(l),l=setTimeout((()=>{e(...i)}),t)}})(d,500)()}return p((()=>{const e=i.value;null==e||e.removeEventListener("scroll",f)})),{scrollWrapRef:i,scrollUlRef:l,state:s,maxHeight:m,listData:v}}});R.render=function(e,s,a,o,r,u){return t(),l("div",{class:"mi-virtual-scroll",ref:"scrollWrapRef",style:c({height:e.maxHeight})},[n("div",{class:"mi-virtual-scroll__warp",ref:"scrollUlRef",style:c({height:e.state.listHeight+"px","padding-top":e.state.scrollTop+"px"})},[(t(!0),l(m,null,v(e.listData,((s,n)=>(t(),l("div",{class:"mi-virtual-scroll__item",key:"scroll_item"+n},[i(e.$slots,"default",{item:s})])))),128))],4)],4)},R.__scopeId="data-v-33424387",R.__file="packages/VirtualScroll/index.vue",R.install=e=>{e.component(R.name||"MiVirtualScroll",R)};const S=R;var I=e({name:"MiHorTimeline",props:{list:{type:Object,default:()=>{}}},setup(e,{slots:t}){let l=a(0),i=a(0),s=a(0),n=a(0),c=a(!1),m=a(!1),v=a(!1),d=a(null),h=a([]);o((()=>{r((()=>{_(),b()}))}));const p=u((()=>{let t=[];return Object.keys(e.list).sort(((e,t)=>t-e)).forEach((l=>{const i=e.list[l];t.push({len:i.length,time:l})})),t})),f=u((()=>{let e=0;if(l.value&&i.value){const t=i.value-5;e=(l.value-t)/t}return e})),g=u((()=>{let e="0";return n.value&&l.value&&(e=n.value/l.value*100+"%"),e})),_=()=>{const e=null==h?void 0:h.value;let t=0;e&&(e.forEach((e=>{t+=e.offsetWidth})),l.value=t);const a=d.value;a&&(i.value=(null==a?void 0:a.offsetWidth)||0),s.value=0,n.value=0},x=e=>{const t=l.value-i.value;t<0||(Math.abs(e)>=t?n.value=t:n.value=e>0?0:e,s.value=Math.abs(n.value)/f.value)},y=e=>{const t=i.value-10;s.value=e>=t?t:e<=0?0:e,f.value<0||(n.value=parseFloat("-"+s.value*f.value))},b=()=>{const e=document.querySelector(".time_line_content");e&&(e.addEventListener("DOMMouseScroll",w,!1),e.addEventListener("mousewheel",w,!1))},w=e=>{e.preventDefault(),v.value||(requestAnimationFrame((()=>{const t=e.wheelDelta||e.detail,l=n.value;x(l+t),v.value=!1})),v.value=!0)};return{setTimeItemRef:e=>{h.value.push(e)},timeLineBox:d,timeList:p,boxRate:g,getAllWidth:_,getLineFlex:e=>e+" auto",mousedown:e=>{const t=e.clientX,l=n.value;c.value=!0,document.onmousemove=e=>{if(c.value){const i=e.clientX-t;x(l+i)}},document.onmouseup=()=>{c.value=!1,document.onmousemove=null,document.onmouseup=null}},silderMousedown:e=>{console.log("silderMousedown",e),m.value=!0;const t=e.clientX,l=s.value;document.onmousemove=e=>{if(m.value){const i=e.clientX-t;y(l+i)}},document.onmouseup=()=>{m.value=!1,document.onmousemove=null,document.onmouseup=null}},changeSliderPosition:e=>{y(e.layerX)},scroll:b,allWidth:l,sliderLeft:s}}});const O={class:"mi-timeline",ref:"timeLineBox"},E={key:0,class:"mi-the_line_box"},W={class:"mi-line_text"};I.render=function(e,a,o,r,u,h){return t(),l("div",O,[s(" 卡片列表 "),n("div",{class:"mi-time_line_content",style:c({width:e.allWidth+"px",transform:"translateX("+e.boxRate+")"}),onMousedown:a[0]||(a[0]=t=>e.mousedown(t))},[(t(!0),l(m,null,v(e.timeList,((s,n)=>(t(),l("ul",{key:"timeline_ul"+s.time+n,class:"mi-time_item_box",ref:"setTimeItemRef"},[(t(!0),l(m,null,v(e.list[s.time],((n,a)=>(t(),l("li",{key:"timeline_li"+a+s.time},[i(e.$slots,"default",{item:n,index:a})])))),128))],512)))),128))],36),s(" 时间轴 线条 "),e.timeList.length>0?(t(),l("div",E,[n("ul",null,[(t(!0),l(m,null,v(e.timeList,((s,o)=>(t(),l("li",{key:"timeline_"+s.time+o,class:"mi-line_item",style:c({flex:e.getLineFlex(s.len)})},[i(e.$slots,"time",{item:s,index:o},(()=>[n("div",{class:"mi-line_fill",onClick:a[1]||(a[1]=f((t=>e.changeSliderPosition(t)),["stop"]))})])),n("span",W,d(s.time),1)],4)))),128))]),s(" 滑块 "),n("div",{class:"mi-slider",style:c({transform:"translateX("+e.sliderLeft+"px)"}),onMousedown:a[2]||(a[2]=t=>e.silderMousedown(t))},null,36)])):s("v-if",!0)],512)},I.__file="packages/HorizontalTimeline/Index.vue",I.install=e=>{e.component(I.name||"MiHorTimeline",I)};const C=I;var X=Object.defineProperty,$=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,D=(e,t,l)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;const P=[b,T,S,C];var A=((e,t)=>{for(var l in t||(t={}))j.call(t,l)&&D(e,l,t[l]);if($)for(var l of $(t))B.call(t,l)&&D(e,l,t[l]);return e})({install:e=>{P.forEach((t=>e.component(t.name,t)))}},P);export{b as MiCard,C as MiHorTimeline,T as MiImageList,S as MiVirtualScroll,A as default};
