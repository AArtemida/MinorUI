"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),t=e.defineComponent({name:"MiCard"});const l={class:"mi-card"},n={key:0,class:"mi-card__header"},o={class:"mi-card__content"};t.render=function(t,i,r,a,s,c){return e.openBlock(),e.createElementBlock("div",l,[t.$slots.header?(e.openBlock(),e.createElementBlock("div",n,[e.renderSlot(t.$slots,"header")])):e.createCommentVNode("v-if",!0),e.createElementVNode("div",o,[e.renderSlot(t.$slots,"default")])])},t.__file="packages/Card/card.vue",t.install=e=>{e.component(t.name||"MiCard",t)};const i=t;var r=e.defineComponent({name:"MiImageList",props:{imgList:Array,showLabel:Boolean,width:{type:Number,default:120}},setup(t,{slots:l}){let n=e.ref(0);const o=e.ref(null);let i=e.ref(0);e.onMounted((()=>{e.nextTick((()=>{const e=o.value;let l=(null==e?void 0:e.offsetWidth)||0;i.value=Math.floor(l/t.width)}))}));const r=e.computed((()=>{let e=t.width+10;return-n.value*e}));return{imagesBoxRef:o,width:t.width,next:()=>{var e;let l=((null==(e=t.imgList)?void 0:e.length)||0)-i.value;n.value<l&&n.value++},prev:()=>{n.value>0&&n.value--},marginLeft:r}}});const a={class:"mi-images",ref:"imagesBoxRef"},s={class:"mi-images__src"},c=["src"],m={key:0,class:"mi-images__txt"};r.render=function(t,l,n,o,i,r){return e.openBlock(),e.createElementBlock("div",a,[e.createElementVNode("div",{class:"mi-images__btn mi-images__prev",onClick:l[0]||(l[0]=(...e)=>t.prev&&t.prev(...e))},"<"),e.createElementVNode("div",{class:"mi-images__content",style:e.normalizeStyle({"margin-left":t.marginLeft+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.imgList,(l=>(e.openBlock(),e.createElementBlock("div",{class:"mi-images__item",key:"mi_image_list_"+l,style:e.normalizeStyle({width:t.width+"px"})},[e.createElementVNode("div",s,[e.createElementVNode("img",{src:l.src||l,alt:"img"},null,8,c)]),t.showLabel?(e.openBlock(),e.createElementBlock("div",m,[e.renderSlot(t.$slots,"label",{},(()=>[e.createElementVNode("p",null,e.toDisplayString(l.label),1)]))])):e.createCommentVNode("v-if",!0)],4)))),128))],4),e.createElementVNode("div",{class:"mi-images__btn mi-images__next",onClick:l[1]||(l[1]=(...e)=>t.next&&t.next(...e))},">")],512)},r.__file="packages/ImageList/Index.vue",r.install=e=>{e.component(r.name||"MiImageList",r)};const u=r;var d=e.defineComponent({name:"MiVirtualScroll",props:{list:{type:Array,default:()=>[]},height:[Number,String],itemHeight:Number,rows:{type:Number,default:20}},setup(t,{slots:l}){const n=e.ref(null);let o=e.ref(null);const i=e.reactive({start:0,end:0,initHeight:0,scrollTop:0,listHeight:0}),r=t.rows||1;let a=t.itemHeight||0;e.onMounted((()=>{e.nextTick((()=>{t.list.length>0&&e.nextTick((()=>{const e=n.value,l=o.value;i.initHeight=n.value.getBoundingClientRect().top+(null==l?void 0:l.scrollTop),a=e.children&&e.children.length?e.children[0].offsetHeight:0,i.listHeight=a*t.list.length}));const l=o.value;null==l||l.addEventListener("scroll",u)}))}));const s=e.computed((()=>t.height&&t.height.toString().includes("%")?t.height:t.height+"px")),c=e.computed((()=>{const e=t.list;let l=i.start+r;return l>=e.length&&(l=e.length),e.slice(i.start,l).map(((e,t)=>{const l=i.start+t+1;return"string"==typeof e||"number"==typeof e?e={val:e,idx:l}:e.idx=l,e}))}));function m(){const e=o.value,t=(null==e?void 0:e.scrollTop)||0;if(t>i.initHeight){const e=Math.floor((t-i.initHeight)/a);i.scrollTop=e*a,i.start=e}else i.scrollTop=0,i.start=0}function u(){((e,t)=>{let l;return(...n)=>{clearTimeout(l),l=setTimeout((()=>{e(...n)}),t)}})(m,500)()}return e.onUnmounted((()=>{const e=o.value;null==e||e.removeEventListener("scroll",u)})),{scrollWrapRef:o,scrollUlRef:n,state:i,maxHeight:s,listData:c}}});d.render=function(t,l,n,o,i,r){return e.openBlock(),e.createElementBlock("div",{class:"mi-virtual-scroll",ref:"scrollWrapRef",style:e.normalizeStyle({height:t.maxHeight})},[e.createElementVNode("div",{class:"mi-virtual-scroll__warp",ref:"scrollUlRef",style:e.normalizeStyle({height:t.state.listHeight+"px","padding-top":t.state.scrollTop+"px"})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.listData,((l,n)=>(e.openBlock(),e.createElementBlock("div",{class:"mi-virtual-scroll__item",key:"scroll_item"+n},[e.renderSlot(t.$slots,"default",{item:l})])))),128))],4)],4)},d.__scopeId="data-v-33424387",d.__file="packages/VirtualScroll/index.vue",d.install=e=>{e.component(d.name||"MiVirtualScroll",d)};const v=d;var p=e.defineComponent({name:"MiHorTimeline",props:{list:{type:Object,default:()=>{}}},setup(t,{slots:l}){let n=e.ref(0),o=e.ref(0),i=e.ref(0),r=e.ref(0),a=e.ref(!1),s=e.ref(!1),c=e.ref(!1),m=e.ref(null),u=e.ref([]);e.onMounted((()=>{e.nextTick((()=>{f(),k()}))}));const d=e.computed((()=>{let e=[];return Object.keys(t.list).sort(((e,t)=>t-e)).forEach((l=>{const n=t.list[l];e.push({len:n.length,time:l})})),e})),v=e.computed((()=>{let e=0;if(n.value&&o.value){const t=o.value-5;e=(n.value-t)/t}return e})),p=e.computed((()=>{let e="0";return r.value&&n.value&&(e=r.value/n.value*100+"%"),e})),f=()=>{const e=null==u?void 0:u.value;let t=0;e&&(e.forEach((e=>{t+=e.offsetWidth})),n.value=t);const l=m.value;l&&(o.value=(null==l?void 0:l.offsetWidth)||0),i.value=0,r.value=0},g=e=>{const t=n.value-o.value;t<0||(Math.abs(e)>=t?r.value=t:r.value=e>0?0:e,i.value=Math.abs(r.value)/v.value)},h=e=>{const t=o.value-10;i.value=e>=t?t:e<=0?0:e,v.value<0||(r.value=parseFloat("-"+i.value*v.value))},k=()=>{const e=document.querySelector(".time_line_content");e&&(e.addEventListener("DOMMouseScroll",_,!1),e.addEventListener("mousewheel",_,!1))},_=e=>{e.preventDefault(),c.value||(requestAnimationFrame((()=>{const t=e.wheelDelta||e.detail,l=r.value;g(l+t),c.value=!1})),c.value=!0)};return{setTimeItemRef:e=>{u.value.push(e)},timeLineBox:m,timeList:d,boxRate:p,getAllWidth:f,getLineFlex:e=>e+" auto",mousedown:e=>{const t=e.clientX,l=r.value;a.value=!0,document.onmousemove=e=>{if(a.value){const n=e.clientX-t;g(l+n)}},document.onmouseup=()=>{a.value=!1,document.onmousemove=null,document.onmouseup=null}},silderMousedown:e=>{console.log("silderMousedown",e),s.value=!0;const t=e.clientX,l=i.value;document.onmousemove=e=>{if(s.value){const n=e.clientX-t;h(l+n)}},document.onmouseup=()=>{s.value=!1,document.onmousemove=null,document.onmouseup=null}},changeSliderPosition:e=>{h(e.layerX)},scroll:k,allWidth:n,sliderLeft:i}}});const f={class:"mi-timeline",ref:"timeLineBox"},g={key:0,class:"mi-the_line_box"},h={class:"mi-line_text"};p.render=function(t,l,n,o,i,r){return e.openBlock(),e.createElementBlock("div",f,[e.createCommentVNode(" 卡片列表 "),e.createElementVNode("div",{class:"mi-time_line_content",style:e.normalizeStyle({width:t.allWidth+"px",transform:"translateX("+t.boxRate+")"}),onMousedown:l[0]||(l[0]=e=>t.mousedown(e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.timeList,((l,n)=>(e.openBlock(),e.createElementBlock("ul",{key:"timeline_ul"+l.time+n,class:"mi-time_item_box",ref:"setTimeItemRef"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.list[l.time],((n,o)=>(e.openBlock(),e.createElementBlock("li",{key:"timeline_li"+o+l.time},[e.renderSlot(t.$slots,"default",{item:n,index:o})])))),128))],512)))),128))],36),e.createCommentVNode(" 时间轴 线条 "),t.timeList.length>0?(e.openBlock(),e.createElementBlock("div",g,[e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.timeList,((n,o)=>(e.openBlock(),e.createElementBlock("li",{key:"timeline_"+n.time+o,class:"mi-line_item",style:e.normalizeStyle({flex:t.getLineFlex(n.len)})},[e.renderSlot(t.$slots,"time",{item:n,index:o},(()=>[e.createElementVNode("div",{class:"mi-line_fill",onClick:l[1]||(l[1]=e.withModifiers((e=>t.changeSliderPosition(e)),["stop"]))})])),e.createElementVNode("span",h,e.toDisplayString(n.time),1)],4)))),128))]),e.createCommentVNode(" 滑块 "),e.createElementVNode("div",{class:"mi-slider",style:e.normalizeStyle({transform:"translateX("+t.sliderLeft+"px)"}),onMousedown:l[2]||(l[2]=e=>t.silderMousedown(e))},null,36)])):e.createCommentVNode("v-if",!0)],512)},p.__file="packages/HorizontalTimeline/Index.vue",p.install=e=>{e.component(p.name||"MiHorTimeline",p)};const k=p;var _=Object.defineProperty,x=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,E=(e,t,l)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;const L=[i,u,v,k];var b=((e,t)=>{for(var l in t||(t={}))y.call(t,l)&&E(e,l,t[l]);if(x)for(var l of x(t))B.call(t,l)&&E(e,l,t[l]);return e})({install:e=>{L.forEach((t=>e.component(t.name,t)))}},L);exports.MiCard=i,exports.MiHorTimeline=k,exports.MiImageList=u,exports.MiVirtualScroll=v,exports.default=b;
